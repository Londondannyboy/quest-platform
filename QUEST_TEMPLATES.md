# Quest Platform - Template Intelligence System

**Version:** 1.0
**Date:** October 11, 2025
**Status:** ‚úÖ Design Complete - Ready for Implementation (Citation format validated)
**Milestone:** First article with inline hyperlinks deployed: https://relocation.quest/iceland-digital-nomad-visa-2025
**Purpose:** Revolutionary content architecture combining SERP intelligence, archetype depth, and template structure

---

## üìö Document Purpose

This document defines Quest's **Template Intelligence System** - a novel approach that:
1. **Analyzes SERP winners** using Serper + Firecrawl to understand what actually ranks
2. **Detects content archetypes** (strategic depth) vs templates (visual structure)
3. **Builds modular content** that combines archetype depth with template familiarity
4. **Optimizes for E-E-A-T** (Experience, Expertise, Authoritativeness, Trustworthiness)

**Related Documents:**
- `QUEST_ARCHITECTURE_V2_3.md` - Technical implementation
- `QUEST_SEO.md` - SEO strategy and schema optimization
- `QUEST_RELOCATION_RESEARCH.md` - Content topics and priorities

---

## üéØ THE CORE INSIGHT: Archetypes vs Templates

### **The Critical Distinction**

**TEMPLATE = Visual Structure** (What users/Google see first)
- "Top 10 Digital Nomad Visas" = Listicle template
- "Portugal vs Spain Visa" = Comparison template
- "Complete Guide to Cyprus Taxes" = Ultimate Guide template

**ARCHETYPE = Strategic Depth** (What actually ranks)
- "Top 10 Digital Nomad Visas" LOOKS like listicle
- Actually IS: 12,000-word skyscraper with 14 modules, ranking for 750+ keywords

### **The Trap We're Avoiding**

```yaml
‚ùå Naive Approach:
  - See "Top 10 Visas" ranking #1
  - Classify: "It's a listicle"
  - Generate: 2000-word listicle
  - Result: Ranks #15 (not competitive)

‚úÖ Archetype-Aware Approach:
  - See "Top 10 Visas" ranking #1
  - Analyze: "Surface = listicle, Depth = skyscraper"
  - Detect: 12k words, 14 modules, 4 schemas, 45 internal links
  - Generate: Skyscraper disguised as listicle
  - Result: Ranks #1-3 (competitive)
```

---

## üèóÔ∏è PART 1: CONTENT ARCHETYPES (Strategic Depth)

Archetypes define the **strategic approach** - depth, comprehensiveness, and ranking potential.

### **Archetype 1: SKYSCRAPER**

**Definition:** Comprehensive domain authority hub that dominates a topic

**Strategic Goals:**
- Rank for 500-2000 keyword variations
- Become the definitive resource LLMs cite
- Maximum E-E-A-T signals

**Specifications:**
```yaml
Word Count: 8,000-15,000
Module Count: 12-20 distinct sections
Internal Links: 30-100 (hub function)
Keyword Target: 500-2000 variations
Schema Stack: 4-6 types (Article + FAQPage + HowTo + ItemList + Review + BreadcrumbList)

E-E-A-T Requirements:
  Experience: ‚úÖ 2-3 case studies, expat interviews, real photos
  Expertise: ‚úÖ Lawyer/expert quotes, official docs cited, data tables
  Authoritativeness: ‚úÖ Government sources, expert contributors, press mentions
  Trustworthiness: ‚úÖ Regular updates, fact-checking, transparent methodology

Required Modules:
  - TL;DR (150-200 words)
  - Key Takeaways (5-7 bullets)
  - Comprehensive overview
  - In-depth sections (10-15 major sections)
  - FAQ (15-25 questions)
  - Comparison tables
  - Calculator/interactive tool
  - Case studies (2-3)
  - Expert quotes (3-5)
  - Data visualizations
  - Internal hub links (30+)
  - References section (20+ citations)

Compatible Templates:
  - Ultimate Guide (most common wrapper)
  - Listicle (numbered skyscraper)
  - Category Pillar (topic overview)
  - Location Guide (country-specific)

YMYL Suitability: ‚úÖ REQUIRED for visa/tax/legal topics
```

**Example:**
- Title: "Top 10 Digital Nomad Visas 2025"
- Surface: Listicle
- Reality: 12,000-word skyscraper
- Structure: Each of 10 visas gets 1000+ words (requirements, process, costs, cities, tax implications)
- Modules: 14 (listicle + tables + FAQ + calculator + case studies + expert quotes)
- Ranks for: "digital nomad visa" + 750 variations

---

### **Archetype 2: CLUSTER HUB**

**Definition:** Topic navigation center linking to 10-20 deep-dive articles

**Strategic Goals:**
- Organize topic cluster
- Provide overview + gateway to detailed content
- Rank for category keywords

**Specifications:**
```yaml
Word Count: 4,000-6,000
Module Count: 8-12
Internal Links: 10-20 (cluster navigation)
Keyword Target: 200-500 variations
Schema Stack: 2-3 types (Article + CollectionPage + ItemList)

E-E-A-T Requirements:
  Experience: ‚ö†Ô∏è Optional case studies
  Expertise: ‚úÖ Topic overview requires expertise
  Authoritativeness: ‚úÖ Hub signals authority on topic
  Trustworthiness: ‚úÖ Accurate overview + reliable links

Required Modules:
  - TL;DR
  - Topic overview (what/why/who)
  - Category breakdown (6-12 subtopics)
  - Quick comparison table
  - Links to deep-dive articles (10-20)
  - FAQ (8-12 questions)
  - Resource library (downloadable guides)
  - References

Compatible Templates:
  - Category Pillar
  - Ultimate Guide (overview style)
  - Location Guide (country overview)

YMYL Suitability: ‚úÖ Good for topic overviews
```

**Example:**
- Title: "Digital Nomad Visas: Complete Global Guide 2025"
- Surface: Ultimate Guide
- Reality: Cluster hub linking to 20 country-specific guides
- Structure: Overview + 20 country summaries (300 words each) + links to full guides
- Modules: 10 (overview + grid + comparison + FAQ + links)
- Ranks for: "digital nomad visas" + category variations

---

### **Archetype 3: DEEP DIVE SPECIALIST**

**Definition:** Definitive answer to ONE specific question/topic

**Strategic Goals:**
- Own a specific niche query
- Maximum depth on single topic
- Rank #1 for exact-match keywords

**Specifications:**
```yaml
Word Count: 3,000-5,000
Module Count: 8-12 focused sections
Internal Links: 3-5 (related only)
Keyword Target: 50-200 variations
Schema Stack: 2-4 types (Article + HowTo + FAQPage)

E-E-A-T Requirements:
  Experience: ‚úÖ Case study or personal example
  Expertise: ‚úÖ Deep technical knowledge
  Authoritativeness: ‚úÖ Expert quotes, official sources
  Trustworthiness: ‚úÖ Step-by-step accuracy

Required Modules:
  - TL;DR
  - Prerequisites section
  - Step-by-step process (5-10 steps)
  - Each step detailed (300-500 words)
  - Troubleshooting section
  - FAQ (8-12 questions)
  - Visual aids (screenshots/diagrams)
  - Expert tips
  - References

Compatible Templates:
  - Deep Dive Tutorial
  - How-To Guide
  - Ultimate Guide (focused)
  - Problem-Solution

YMYL Suitability: ‚úÖ Excellent for specific visa/tax processes
```

**Example:**
- Title: "How to Get Portugal NHR Tax Status: Complete Application Guide"
- Surface: How-To Guide
- Reality: Deep dive on single tax program
- Structure: 10 detailed steps, each 400 words, with examples and screenshots
- Modules: 10 (prerequisites + 10 steps + troubleshooting + FAQ)
- Ranks for: "Portugal NHR" + application variations

---

### **Archetype 4: COMPARISON MATRIX**

**Definition:** Interactive decision engine for comparing multiple options

**Strategic Goals:**
- Help users make decisions
- Rank for "[X] vs [Y]" queries
- High conversion intent

**Specifications:**
```yaml
Word Count: 3,000-4,000
Module Count: 9-12
Internal Links: 10-15 (to individual reviews)
Keyword Target: 100-300 variations
Schema Stack: 3-5 types (Article + ComparisonTable + Review + AggregateRating)

E-E-A-T Requirements:
  Experience: ‚úÖ Personal testing or user data
  Expertise: ‚úÖ Comparison criteria expertise
  Authoritativeness: ‚úÖ Transparent methodology
  Trustworthiness: ‚úÖ Fair, balanced assessment

Required Modules:
  - TL;DR with quick verdict
  - Methodology section
  - Side-by-side comparison table (top 3)
  - Full comparison matrix (all options)
  - Individual reviews (pros/cons)
  - Decision framework quiz
  - Pricing comparison
  - FAQ (10-15 questions)
  - Winner badges
  - References

Compatible Templates:
  - Comparison
  - Listicle (ranked comparison)
  - Ultimate Guide (comparison focus)

YMYL Suitability: ‚úÖ Good for visa/tax comparisons
```

**Example:**
- Title: "Cyprus vs Malta vs Portugal: Best Tax Residency Comparison 2025"
- Surface: Comparison
- Reality: Interactive decision engine
- Structure: 3-way comparison across 10 criteria + calculator + quiz
- Modules: 12 (tables + individual reviews + calculator + quiz + FAQ)
- Ranks for: "Cyprus vs Malta tax" + all permutations

---

### **Archetype 5: NEWS HUB**

**Definition:** Living document tracking changes/updates with historical context

**Strategic Goals:**
- Rank for timely queries
- Become go-to source for updates
- Maintain freshness signals

**Specifications:**
```yaml
Word Count: 2,000-3,000 (grows over time)
Module Count: 7-10
Internal Links: 5-10 (to historical articles)
Keyword Target: 50-150 variations
Schema Stack: 2-3 types (NewsArticle + Article + Event)

E-E-A-T Requirements:
  Experience: ‚ö†Ô∏è Optional
  Expertise: ‚úÖ Understanding of changes
  Authoritativeness: ‚úÖ Official sources cited
  Trustworthiness: ‚úÖ Accurate, timely updates

Required Modules:
  - TL;DR (what changed)
  - Key changes list
  - Before vs after comparison
  - Effective dates timeline
  - Who's affected
  - Impact analysis
  - Action items
  - Historical context
  - FAQ (6-10 questions)
  - References

Compatible Templates:
  - News/Update
  - Ultimate Guide (update focus)
  - Problem-Solution (addressing changes)

YMYL Suitability: ‚ö†Ô∏è Good for visa changes, requires accuracy
```

**Example:**
- Title: "Portugal Golden Visa 2025 Changes: What You Need to Know"
- Surface: News article
- Reality: Living document updated as changes occur
- Structure: Timeline of changes + before/after + impact analysis
- Modules: 9 (summary + timeline + comparison + impact + FAQ)
- Ranks for: "Portugal golden visa 2025 changes" + variations

---

### **Archetype 6: CONVERSATIONAL ANSWER HUB (v2.5.0)**

**Definition:** Persona-specific answer to conversational long-tail queries

**Strategic Goals:**
- Capture 9-35 word conversational queries BEFORE they exist in GSC
- Rank in AI Overviews (ChatGPT, Perplexity, Claude, Google AI)
- First-mover advantage (be the ONLY result for ultra-specific queries)
- Cross-site application (relocation.quest, placement.quest, rainmaker.quest)

**Specifications:**
```yaml
Word Count: 1,500-3,000
Module Count: 6-8 (lean, conversational)
Internal Links: 3-5 (related only)
Keyword Target: 1-10 variations (highly specific)
Schema Stack: QAPage + Person + SpeakableSpecification + BreadcrumbList

E-E-A-T Requirements:
  Experience: ‚úÖ 1-2 persona-specific case studies
  Expertise: ‚úÖ Quote relevant to THIS persona
  Authoritativeness: ‚úÖ .gov/.official sources for this persona
  Trustworthiness: ‚úÖ Update date, "Last verified", persona-specific accuracy

Required Modules:
  - PersonaSummary (NEW) - "Your Situation" recap
  - DirectAnswer (NEW) - Yes/no/depends in first 100 words
  - PersonaSpecificDetails - Nationality/role/business-specific (not generic)
  - AnticipatedFollowUps (NEW) - "You might also be wondering..."
  - PersonaCaseStudy (NEW) - Real story matching this persona
  - PersonaChecklist - Action steps for THIS persona
  - ReferencesPersonaSpecific - Sources relevant to this persona

Compatible Templates:
  - ConversationalQA (most common)
  - PersonaGuide (persona-focused)
  - DirectAnswer (ultra-focused)

YMYL Suitability:
  - relocation.quest: ‚úÖ REQUIRED (visa/tax = maximum E-E-A-T)
  - placement.quest: ‚ö†Ô∏è HIGH (career decisions = important)
  - rainmaker.quest: ‚úÖ REQUIRED (business/finance = maximum E-E-A-T)
```

**Holistic Cross-Site Examples:**

**relocation.quest:**
- **Query:** "I'm a US citizen software engineer working remotely making $120k. Can I get a Portugal digital nomad visa?"
- **Surface:** Conversational Q&A
- **Reality:** Persona-specific answer (US citizen-specific tax info, income requirements, etc.)
- **Structure:** Persona recap ‚Üí Direct yes/no ‚Üí US-specific details ‚Üí Follow-ups ‚Üí Case study (US software engineer)
- **Modules:** 7 (PersonaSummary, DirectAnswer, PersonaSpecificDetails, AnticipatedFollowUps, PersonaCaseStudy, PersonaChecklist, References)
- **Ranks for:** This exact 16-word query + 5-10 variations

**placement.quest:**
- **Query:** "I'm a marketing manager with 7 years experience in London. How do I negotiate a remote work policy with my employer?"
- **Surface:** Conversational Q&A
- **Reality:** Persona-specific career advice (manager-level negotiation tactics, London market context)
- **Structure:** Persona recap ‚Üí Direct answer (steps) ‚Üí Manager-specific tactics ‚Üí Follow-ups ‚Üí Case study (marketing manager who succeeded)
- **Modules:** 7 (PersonaSummary, DirectAnswer, PersonaSpecificDetails, AnticipatedFollowUps, PersonaCaseStudy, PersonaChecklist, References)
- **Ranks for:** This exact 17-word query + 5-10 variations

**rainmaker.quest:**
- **Query:** "I'm a freelance web designer making $8k/month working with 5 clients. Should I form an LLC in Delaware or stay as a sole proprietor?"
- **Surface:** Conversational Q&A
- **Reality:** Persona-specific business/tax advice ($8k/month freelancer = specific tax bracket, client count considerations)
- **Structure:** Persona recap ‚Üí Direct answer (yes/no + why) ‚Üí Freelancer-specific analysis ‚Üí Follow-ups ‚Üí Case study (freelancer at this revenue level)
- **Modules:** 7 (PersonaSummary, DirectAnswer, PersonaSpecificDetails, AnticipatedFollowUps, PersonaCaseStudy, PersonaChecklist, References)
- **Ranks for:** This exact 26-word query + 5-10 variations

**Pattern Formula (Universal):**

```
[Persona] + [Situation] + [Question] = Conversational Query

relocation.quest:
  "I'm a {nationality} {profession} {situation}. {visa/tax question}?"

placement.quest:
  "I'm a {role} {experience level} {situation}. {career question}?"

rainmaker.quest:
  "I'm a {business type} {revenue level} {situation}. {business question}?"
```

**Why This Works (Even Without Authority):**

Traditional SEO:
- Need backlinks, domain authority, historical rankings
- Compete against established sites
- Takes 6-12 months to rank

Conversational Long-Tail SEO:
- **No competition** - These queries are NEW (didn't exist 6 months ago)
- **LLMs don't care about domain authority** - They care about RELEVANCE and PERSONA MATCH
- **First-mover wins** - If you're the ONLY site with this exact pattern, you rank by default

**Example:**
Query: "I'm a US citizen software engineer making $120k working remotely for a US company. If I move to Portugal on a digital nomad visa, will I pay US taxes or Portuguese taxes or both?"

- **Ahrefs search volume:** 0 (doesn't exist)
- **Competitors targeting this:** 0 (too specific)
- **If Quest publishes this EXACT pattern:** We're the ONLY result
- **Result:** Instant #1 ranking (no authority needed)

---

## üé® PART 2: VISUAL TEMPLATES (User-Facing Structure)

Templates define the **visual presentation** - what users recognize and expect.

### **Template 1: ULTIMATE GUIDE**

**Visual Pattern:** "Complete Guide to [Topic]", "Ultimate [Topic] Guide 2025"

**Compatible Archetypes:**
- ‚úÖ Skyscraper (most common)
- ‚úÖ Cluster Hub
- ‚úÖ Deep Dive Specialist

**Structure:**
```yaml
Hero Section:
  - Breadcrumbs
  - Last updated badge
  - Reading time
  - Sticky table of contents

Content Flow:
  1. TL;DR section (150 words)
  2. Key stats callout (3-4 numbers)
  3. Overview (what/why/who)
  4. Key benefits grid (3-6 items)
  5. Requirements checklist
  6. Step-by-step process
  7. Cost breakdown table
  8. Comparison section
  9. FAQ accordion (8-12 Q&A)
  10. Expert quotes (2-3)
  11. Related resources grid
  12. References

Page Features:
  - Interactive calculator
  - Downloadable PDF checklist
  - Email capture for updates
  - Progress indicator

Schema Types:
  - Article (primary)
  - HowTo (process steps)
  - FAQPage (FAQ section)
  - BreadcrumbList

Astro Component: UltimateGuide.astro
```

---

### **Template 2: LISTICLE**

**Visual Pattern:** "Top N [Topic]", "Best [Options] in 2025"

**Compatible Archetypes:**
- ‚úÖ Skyscraper (deep listicle)
- ‚úÖ Comparison Matrix (ranked)
- ‚ö†Ô∏è Cluster Hub (shallow listicle)

**Structure:**
```yaml
Hero Section:
  - Number badge (Top 10)
  - At-a-glance summary table

Content Flow:
  1. TL;DR (150 words)
  2. Key takeaways (5 bullets)
  3. Selection criteria (how we chose)
  4. #1 Best Overall:
     - Hero image
     - Detailed review (300-800 words depending on archetype)
     - Pros/cons
     - Best for
     - Pricing
     - CTA button
  5. #2-N (similar structure, variable depth)
  6. Comparison matrix (all items)
  7. Buyers guide (how to choose)
  8. FAQ (8-12 questions)
  9. References

Page Features:
  - Jump to number navigation
  - Star ratings
  - Filter/sort options
  - Comparison checkboxes

Schema Types:
  - Article
  - ItemList (ranked)
  - ListItem (each entry)
  - Review
  - Rating

Astro Component: Listicle.astro
```

---

### **Template 3: COMPARISON**

**Visual Pattern:** "[Option A] vs [Option B]", "[Topic] Comparison 2025"

**Compatible Archetypes:**
- ‚úÖ Comparison Matrix (best fit)
- ‚úÖ Skyscraper (comprehensive comparison)

**Structure:**
```yaml
Hero Section:
  - Side-by-side preview (top 2-3)
  - Quick verdict
  - Winner badges

Content Flow:
  1. TL;DR with recommendation
  2. Key differences (5 bullets)
  3. Methodology (how we compare)
  4. Quick comparison table
  5. Option A deep dive (pros/cons/best for)
  6. Option B deep dive
  7. (Option C, D, etc. if applicable)
  8. Feature-by-feature breakdown
  9. Pricing comparison
  10. Decision framework (choose X if...)
  11. FAQ (10-15 questions)
  12. References

Page Features:
  - Interactive comparison tool
  - Filter by criteria
  - Save comparison PDF
  - Affiliate disclosure

Schema Types:
  - Article
  - ComparisonTable
  - Review (for each option)
  - AggregateRating

Astro Component: Comparison.astro
```

---

### **Template 4: LOCATION GUIDE**

**Visual Pattern:** "[City/Country] Guide for [Audience]"

**Compatible Archetypes:**
- ‚úÖ Skyscraper (comprehensive location)
- ‚úÖ Deep Dive Specialist (focused location)

**Structure:**
```yaml
Hero Section:
  - Interactive map
  - Key stats overlay (population, language, currency)
  - Climate widget

Sidebar:
  - Quick facts
  - Visa requirements
  - Cost of living summary
  - Best time to visit

Content Flow:
  1. TL;DR (why this location)
  2. Key takeaways (5-7 bullets)
  3. Overview (what makes it special)
  4. Best neighborhoods (map + descriptions)
  5. Cost of living calculator
  6. Practical information:
     - Getting there
     - Transportation
     - Healthcare
     - Banking
     - Internet speeds
  7. Coworking spaces (map view)
  8. Insider tips
  9. Expat community
  10. FAQ (10-15 questions)
  11. References

Page Features:
  - Embedded Google Maps
  - Cost calculator
  - Weather widget
  - Currency converter
  - Neighborhood filter

Schema Types:
  - Article
  - Place
  - TouristDestination
  - LocalBusiness (coworking)

Astro Component: LocationGuide.astro
```

---

### **Template 5: DEEP DIVE TUTORIAL**

**Visual Pattern:** "How to [Specific Task]", "Step-by-Step: [Process]"

**Compatible Archetypes:**
- ‚úÖ Deep Dive Specialist (best fit)
- ‚úÖ Skyscraper (comprehensive tutorial)

**Structure:**
```yaml
Hero Section:
  - Difficulty level badge
  - Time required
  - Prerequisites checklist

Content Flow:
  1. TL;DR (what you'll learn)
  2. What you need (prerequisites)
  3. Video embed (optional)
  4. Step-by-step process:
     - Step 1:
       - Headline
       - Detailed instructions
       - Screenshot (annotated)
       - Tips callout
       - Common mistakes
     - Steps 2-N (same structure)
  5. Troubleshooting section
  6. What to do after
  7. FAQ (8-12 questions)
  8. References

Page Features:
  - Progress indicator
  - Print-friendly version
  - Bookmark tool
  - Video chapters

Schema Types:
  - HowTo
  - HowToStep (each step)
  - VideoObject (if video)
  - FAQPage

Astro Component: DeepDiveTutorial.astro
```

---

### **Additional Templates (6-12)**

**Template 6: CATEGORY PILLAR**
- Pattern: "Everything About [Category]"
- Archetypes: Cluster Hub, Skyscraper
- Component: CategoryPillar.astro

**Template 7: PROBLEM-SOLUTION**
- Pattern: "[Problem]? Here's How to Fix It"
- Archetypes: Deep Dive Specialist
- Component: ProblemSolution.astro

**Template 8: NEWS/UPDATE**
- Pattern: "[Topic] 2025 Changes"
- Archetypes: News Hub
- Component: NewsUpdate.astro

**Template 9: CASE STUDY**
- Pattern: "How [Person] Achieved [Result]"
- Archetypes: Deep Dive Specialist
- Component: CaseStudy.astro

**Template 10: DATA STUDY**
- Pattern: "[Topic] Statistics & Data Analysis"
- Archetypes: Skyscraper, Deep Dive
- Component: DataStudy.astro

**Template 11: TOOL/CALCULATOR**
- Pattern: "[Topic] Calculator", "Free [Tool]"
- Archetypes: Comparison Matrix, Deep Dive
- Component: ToolCalculator.astro

**Template 12: INTERVIEW/Q&A**
- Pattern: "Expert Interview: [Topic]"
- Archetypes: Deep Dive Specialist
- Component: Interview.astro

---

## üß© PART 3: MODULAR COMPONENTS LIBRARY

Reusable building blocks that mix and match across templates/archetypes.

### **Content Modules (15)**

1. **TldrSection** - 150-200 word summary
2. **KeyTakeaways** - 3-7 bullet points in colored box
3. **StatsCallout** - Big number + context
4. **ProsConsList** - Two-column comparison
5. **StepByStep** - Numbered timeline/process
6. **FaqAccordion** - Expandable Q&A (8-25 questions)
7. **ComparisonTable** - Sortable/filterable table
8. **ExpertQuote** - Testimonial with photo/credentials
9. **CaseStudyCard** - Mini success story
10. **ResourceGrid** - Related articles/tools
11. **GlossaryTerms** - Hover definitions
12. **VideoEmbed** - YouTube/Vimeo with transcript
13. **Infographic** - Visual data representation
14. **Timeline** - Chronological steps/events
15. **Checklist** - Downloadable PDF

### **Interactive Modules (10)**

16. **Calculator** - JS-powered computation (tax, visa costs, etc.)
17. **Quiz** - Assessment with results
18. **InteractiveMap** - Google Maps embed with pins
19. **FilterSystem** - Refine table/grid results
20. **ComparisonCheckbox** - Select items to compare
21. **CostEstimator** - Multi-variable calculator
22. **ProgressTracker** - Save user's place
23. **BookmarkTool** - Save for later
24. **EmailCapture** - Newsletter signup
25. **LiveData** - Real-time stats (visitor count, etc.)

### **Schema Modules (10)**

26. **ArticleSchema** - Basic structured data
27. **HowToSchema** - Step-by-step markup
28. **FaqSchema** - Q&A markup (rich snippets!)
29. **ReviewSchema** - Star ratings
30. **BreadcrumbSchema** - Navigation hierarchy
31. **TableSchema** - Comparison table markup
32. **VideoSchema** - Embedded video metadata
33. **EventSchema** - Webinar/deadline markup
34. **PersonSchema** - Expert profiles
35. **OrganizationSchema** - Company info

---

## üéØ PART 4: ARCHETYPE + TEMPLATE COMPATIBILITY MATRIX

**Query Intent ‚Üí Archetype ‚Üí Template Selection:**

| Query Type | Best Archetype | Compatible Templates | Example |
|------------|----------------|---------------------|---------|
| "What is [topic]" | Skyscraper | Ultimate Guide | "What is Portugal Golden Visa" |
| "Best [options]" | Skyscraper or Comparison Matrix | Listicle, Comparison | "Best Digital Nomad Visas" |
| "[A] vs [B]" | Comparison Matrix | Comparison | "Cyprus vs Malta Tax" |
| "How to [task]" | Deep Dive Specialist | Deep Dive Tutorial | "How to Get NHR Status" |
| "[Country] guide" | Skyscraper or Cluster Hub | Location Guide | "Portugal Guide for Nomads" |
| "[Problem]?" | Deep Dive Specialist | Problem-Solution | "Denied Visa Application?" |
| "[Topic] 2025 changes" | News Hub | News/Update | "Portugal Visa Changes 2025" |
| "How [person] did [thing]" | Deep Dive Specialist | Case Study | "How I Got Cyprus Residency" |
| "[Topic] statistics" | Skyscraper | Data Study | "Digital Nomad Statistics 2025" |
| "[Topic] calculator" | Comparison Matrix | Tool/Calculator | "Visa Cost Calculator" |
| "Interview with [expert]" | Deep Dive Specialist | Interview/Q&A | "Interview: Immigration Lawyer" |
| "Everything about [category]" | Cluster Hub | Category Pillar | "Everything About Golden Visas" |

---

## üî¨ PART 5: SERP INTELLIGENCE & TEMPLATE DETECTION

### **The Detection Pipeline**

**Step 1: Serper.dev Analysis**
- Get top 10 Google results for keyword
- Extract: URLs, titles, snippets, positions
- Identify: Featured snippet, People Also Ask

**Step 2: Firecrawl Scraping**
- Scrape top 3-5 competitor pages
- Extract: Full HTML, markdown content
- Capture: Page structure, headings, modules

**Step 3: Multi-Dimensional Archetype Detection**

```python
ArchetypeDetector.analyze(scraped_html):

  # DEPTH ANALYSIS
  word_count = count_words()
  section_count = count_sections()
  avg_section_depth = word_count / section_count

  # MODULE DETECTION
  modules_found = detect_modules()  # FAQ, calculator, table, video, etc.
  module_count = len(modules_found)

  # LINKING ANALYSIS
  internal_links = count_internal_links()

  # SCHEMA DETECTION
  schemas_found = extract_json_ld()
  schema_count = len(schemas_found)

  # KEYWORD ANALYSIS
  keyword_variations = analyze_headings()

  # E-E-A-T SIGNALS
  has_expert_quotes = detect_quotes()
  has_case_studies = detect_testimonials()
  has_citations = count_citations()
  has_author_bio = detect_author()

  # ARCHETYPE SCORING (multi-factor)
  scores = {
    'skyscraper': calculate_skyscraper_score(),
    'cluster_hub': calculate_cluster_score(),
    'deep_dive': calculate_deep_dive_score(),
    'comparison_matrix': calculate_comparison_score(),
    'news_hub': calculate_news_score()
  }

  return {
    'primary_archetype': max(scores),
    'surface_template': detect_visual_template(),
    'confidence': scores[primary_archetype] / 100,
    'modules_found': modules_found,
    'eeat_signals': {...}
  }
```

**Step 4: Recommendation Engine**

```python
def recommend_archetype_and_template(serp_analysis):
  """
  Based on top 3 competitors, recommend best approach
  """

  # What dominates positions 1-3?
  dominant_archetype = most_common([
    pos1_archetype,
    pos2_archetype,
    pos3_archetype
  ])

  # What template do users expect?
  expected_template = analyze_titles_and_structure()

  # What modules appear frequently?
  common_modules = get_modules_appearing_in_2_plus_competitors()

  return {
    'recommended_archetype': dominant_archetype,
    'recommended_template': expected_template,
    'required_modules': common_modules,
    'target_word_count': avg_word_count,
    'target_module_count': avg_module_count
  }
```

---

## üìä PART 6: E-E-A-T OPTIMIZATION FOR YMYL CONTENT

**Our entire niche (relocation.quest) is YMYL-heavy:**
- Visa/immigration = YMYL (life-changing decisions)
- Tax advice = YMYL (financial impact)
- Legal processes = YMYL (legal consequences)

**Google REQUIRES maximum E-E-A-T for YMYL topics.**

### **E-E-A-T Requirements by Archetype**

**Skyscraper (Maximum E-E-A-T):**
```yaml
Experience:
  - ‚úÖ 2-3 expat case studies with real names/photos
  - ‚úÖ Personal interviews or user testimonials
  - ‚úÖ "I tried this" first-hand accounts

Expertise:
  - ‚úÖ Immigration lawyer quotes
  - ‚úÖ Tax accountant contributions
  - ‚úÖ Government official sources cited
  - ‚úÖ Data tables with official statistics

Authoritativeness:
  - ‚úÖ Links to .gov sources
  - ‚úÖ Press mentions or citations
  - ‚úÖ Expert contributor bios
  - ‚úÖ Published research referenced

Trustworthiness:
  - ‚úÖ Last updated date prominently displayed
  - ‚úÖ Transparent methodology
  - ‚úÖ Fact-checking process documented
  - ‚úÖ Contact information available
  - ‚úÖ Author credentials visible
```

**Deep Dive Specialist (High E-E-A-T):**
```yaml
Experience:
  - ‚úÖ At least 1 detailed case study
  - ‚úÖ Step-by-step with real examples

Expertise:
  - ‚úÖ Expert review or quote
  - ‚úÖ Official documentation cited

Authoritativeness:
  - ‚úÖ .gov sources for legal/tax info
  - ‚úÖ Professional credentials

Trustworthiness:
  - ‚úÖ Accuracy disclaimer
  - ‚úÖ Update date visible
  - ‚úÖ Clear sourcing
```

**Comparison Matrix (Medium E-E-A-T):**
```yaml
Experience:
  - ‚ö†Ô∏è Optional: User reviews/data

Expertise:
  - ‚úÖ Transparent comparison criteria
  - ‚úÖ Expert methodology

Authoritativeness:
  - ‚úÖ Fair, balanced assessment
  - ‚úÖ No hidden bias

Trustworthiness:
  - ‚úÖ Affiliate disclosure (if applicable)
  - ‚úÖ Regular updates
  - ‚úÖ Accurate data
```

---

## üöÄ PART 7: IMPLEMENTATION WORKFLOW

### **Article Generation with Template Intelligence**

```
1. Keyword Research
   - User/system requests: "Portugal Digital Nomad Visa 2025"

2. SERP Intelligence Check
   - Query serp_intelligence table: Do we have analysis for this keyword?
   - If YES ‚Üí Use cached recommendations
   - If NO ‚Üí Run Serper + Firecrawl analysis

3. Competitor Analysis
   - Serper ‚Üí Get top 10 URLs
   - Firecrawl ‚Üí Scrape top 3-5 competitors
   - TemplateDetector ‚Üí Analyze scraped content
   - Store in: serp_intelligence + scraped_competitors tables

4. Archetype & Template Selection
   - TemplateDetector recommends:
     - Primary archetype: "skyscraper"
     - Surface template: "ultimate-guide"
     - Required modules: ['tldr', 'overview', 'requirements', 'process', 'faq', 'calculator', 'case-studies']
     - Target word count: 8500 words
     - Target modules: 14

5. Module Assembly
   - Load archetype requirements from content_archetypes table
   - Load template structure from content_templates table
   - Combine: archetype depth + template style
   - Select modules from modules list

6. Content Generation
   - ContentAgent receives:
     - Research data (Perplexity + Tavily + DataForSEO)
     - Archetype requirements
     - Template structure
     - Module list
   - Haiku generates content following archetype/template
   - Returns markdown with module markers

7. Schema Generation
   - Load schema templates for archetype
   - Populate with article data
   - Stack multiple schemas (Article + HowTo + FAQPage)
   - Generate JSON-LD

8. Frontend Rendering
   - Astro detects: surface_template = "ultimate-guide"
   - Loads: src/templates/UltimateGuide.astro
   - Renders modules: TldrSection, FaqAccordion, Calculator, etc.
   - Injects schema into <head>
   - Beautiful, structured, E-E-A-T-optimized page

9. Performance Tracking
   - Store in template_performance table
   - Track: quality_score, word_count, modules_used, archetype, template
   - Learn: Which archetype/template combinations work best
   - Iterate: Update recommendations based on results
```

---

## üìà SUCCESS METRICS

**Template Detection Accuracy:**
- Target: >85% archetype detection accuracy
- Measure: Manual validation vs automated detection

**Content Quality:**
- Skyscraper articles: 8000+ words, 12+ modules, 85+ quality score
- Deep Dive articles: 3500+ words, 9+ modules, 85+ quality score
- E-E-A-T signals present in 100% of YMYL content

**SERP Performance (Future):**
- Track rankings for target keywords
- Measure: Archetype used vs SERP position
- Learn: Which archetypes win for which query types

**System Learning:**
- Continuously update archetype recommendations
- Refine module requirements based on performance
- Evolve templates as SERP patterns change

---

## üîó RELATED SYSTEMS

**Database Tables:**
- `content_archetypes` - Archetype definitions
- `content_templates` - Template definitions
- `serp_intelligence` - SERP analysis results
- `scraped_competitors` - Individual competitor analysis
- `template_performance` - Learning from results
- `articles` - Enhanced with archetype/template fields

**Agents:**
- `ResearchAgent` - Gathers SERP intelligence
- `TemplateDetector` - Analyzes competitors, detects archetypes
- `ContentAgent` - Generates content using archetype + template
- `SchemaGenerator` - Creates multi-schema JSON-LD

**Frontend:**
- `src/templates/` - Astro template components
- `src/templates/_components/` - Modular component library

---

**Document Owner:** Quest Platform Team
**Last Updated:** October 10, 2025
**Next Review:** After first 10 template-based articles generated
**Status:** Ready for Implementation ‚úÖ

---

**The Template Intelligence System is Quest's competitive moat - nobody else combines SERP analysis, archetype detection, and modular content generation at scale.** üöÄ
